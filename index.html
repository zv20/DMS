<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KitchenPro DMS</title>
  
  <link rel="stylesheet" href="css/styles.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@300;400;600&display=swap" rel="stylesheet">
  
  <script src="js/i18n.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/store.js"></script>
  <script src="js/render.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/template.js"></script>
  <script src="js/main.js"></script>
</head>
<body data-theme="default">

  <!-- Splash & Header remains same... -->

  <div class="app-container">
    <main class="content">

      <!-- MENU PLANNING PAGE -->
      <div id="menu" class="page active">
        <div class="page-header">
          <h1 data-i18n="nav_menu">Menu Planning</h1>
          <div class="actions">
             <button class="btn btn-primary" onclick="window.openTemplatePicker()" data-i18n="btn_print">ğŸ–¨ï¸ Print Menu</button>
          </div>
        </div>
        <!-- Calendar Controls... -->
        <div id="calendar" class="week-view"></div>
      </div>

      <!-- STYLE EDITOR PAGE (Redesigned for Blocks) -->
      <div id="style-editor" class="page">
        <div class="page-header">
          <button class="btn btn-secondary btn-small" onclick="window.navigateTo('settings')">â† Back</button>
          <h1 data-i18n="nav_template_builder">Template Builder</h1>
          <div class="actions">
             <button class="btn btn-primary" onclick="window.saveStructuredTemplate()">Save Template</button>
          </div>
        </div>

        <div class="builder-layout" style="display: grid; grid-template-columns: 400px 1fr; gap: 20px; height: calc(100vh - 120px);">
             <div class="builder-controls" style="overflow-y: auto; padding: 20px; background: white; border-radius: 8px;">
                  
                  <section class="control-section">
                      <h3>ğŸ” Header Settings</h3>
                      <input type="text" id="headerText" placeholder="Header Title (e.g. Weekly Menu)" class="form-control">
                      <div class="form-row">
                          <label>Color</label><input type="color" id="headerColor">
                          <label>Size</label><input type="text" id="headerSize" value="24pt" style="width:60px;">
                      </div>
                  </section>

                  <section class="control-section" style="margin-top:20px;">
                      <h3>ğŸ“… Day Block Styles</h3>
                      <div class="form-row">
                         <label>Bg</label><input type="color" id="dayBg">
                         <label>Radius</label><input type="number" id="dayRadius" value="8">
                      </div>
                      <div class="form-row">
                         <label>Sticker</label>
                         <select id="daySticker">
                             <option value="ğŸ½ï¸">ğŸ½ï¸ Plate</option>
                             <option value="ğŸ">ğŸ Apple</option>
                             <option value="ğŸ²">ğŸ² Pot</option>
                             <option value="ğŸŒŸ">ğŸŒŸ Star</option>
                         </select>
                      </div>
                  </section>

                  <section class="control-section" style="margin-top:20px;">
                      <h3>ğŸ”š Footer Settings</h3>
                      <textarea id="footerText" placeholder="Footer notes..." class="form-control" rows="3"></textarea>
                  </section>
             </div>

             <div class="builder-preview-area" style="background: #e9ecef; display: flex; justify-content: center; padding: 20px; overflow-y: auto;">
                  <div id="livePreviewSheet" style="width: 210mm; min-height: 297mm; background: white; padding: 20mm; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transform: scale(0.75); transform-origin: top center;">
                       <div id="previewHeader"></div>
                       <div id="previewDaysList" style="margin: 20px 0;"></div>
                       <div id="previewFooter"></div>
                  </div>
             </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Template Picker Modal -->
  <div id="templatePickerModal" class="modal">
      <div class="modal-content" style="max-width: 500px;">
          <h2 data-i18n="heading_select_template">Select Template</h2>
          <div id="templateGrid" class="template-selection-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0;">
              <!-- Templates injected here -->
          </div>
          <div class="modal-actions">
              <button class="btn btn-secondary" onclick="document.getElementById('templatePickerModal').style.display='none'">Cancel</button>
          </div>
      </div>
  </div>

</body>
</html>
